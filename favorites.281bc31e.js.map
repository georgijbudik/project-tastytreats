{"mappings":"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","sources":["src/js/favoritesCards.js","src/js/api/favorites-api.js","node_modules/@parcel/runtime-js/lib/runtime-af6276a01b713a3f.js","node_modules/@parcel/runtime-js/lib/runtime-4e824f8b1d7aeaf2.js","src/favorites.js"],"sourcesContent":["import { renderFavoriterecipes } from './api/favorites-api';\nimport { renderModalByRecipe, openModal, addClickHandler } from './pop-up';\nimport { createMarkup } from './createMarkupCards';\nimport fetchRecipeById from './api/recipe-info-api';\nimport SPRITE from '../images/sprite/sprite.svg';\nimport Notiflix from 'notiflix';\n\nNotiflix.Confirm.init({\n  zindex: 100000,\n});\n\n// localStorage.clear();\n\nconst deleteBtnRef = document.querySelector('.favorites-delete-recipes-btn');\nconst likedRecipeList = document.querySelector('.favorites-recipe-list');\nconst emptyPlaceholderRef = document.querySelector('.empty-meal');\n\nconst ratingModalCloseBtn = document.querySelector('[data-rating-close]');\nconst ratingModal = document.querySelector('[data-rating-form]');\nconst backdrop = document.querySelector('.popup-backdrop');\nconst closeModalBtn = document.querySelector('[data-action=\"close\"]');\n\ncloseModalBtn.addEventListener('click', () => {\n  closeModalPopup();\n});\n\nratingModalCloseBtn.addEventListener('click', () => {\n  ratingModal.classList.remove('is-visible');\n});\nconst likedRecipesArray = JSON.parse(localStorage.getItem('liked-recipes'));\nlet uniqueLikedRecipes;\n\nif (likedRecipesArray.length !== 0) {\n  emptyPlaceholderRef.classList.remove('empty-meal-is-visible');\n  deleteBtnRef.classList.remove('is-hidden');\n}\n\nif (!likedRecipesArray || likedRecipesArray.length === 0) {\n  return;\n} else {\n  uniqueLikedRecipes = likedRecipesArray.filter(\n    (value, index, array) => array.indexOf(value) === index\n  );\n\n  for (const recipe of uniqueLikedRecipes) {\n    renderFavoriterecipes(recipe).then(({ data }) => {\n      createCards([data]);\n      // createRecipePopup(data);\n    });\n  }\n}\n\ndeleteBtnRef.addEventListener('click', e => {\n  e.currentTarget.blur();\n  document.body.style.overflow = 'hidden';\n  Notiflix.Confirm.show(\n    'Delete all recipes',\n    'Are you sure you want to delete all the recipes?',\n    'Yes',\n    'No',\n    () => {\n      localStorage.setItem('liked-recipes', JSON.stringify([]));\n      emptyPlaceholderRef.classList.add('empty-meal-is-visible');\n      deleteBtnRef.classList.add('is-hidden');\n      likedRecipeList.innerHTML = '';\n      document.body.style.overflow = 'auto';\n    },\n    () => {\n      document.body.style.overflow = 'auto';\n    }\n  );\n});\n\nfunction closeModalPopup() {\n  window.removeEventListener('mousedown', outerClickHandler);\n  window.removeEventListener('keydown', escapePressHandler);\n  backdrop.classList.remove('is-visible');\n  document.body.style.overflow = 'auto';\n}\n\nfunction outerClickHandler(e) {\n  if (e.target === backdrop) {\n    closeModalPopup();\n  }\n  if (e.target === ratingModal) {\n    ratingModal.classList.remove('is-visible');\n  }\n}\n\nfunction escapePressHandler(e) {\n  if (!ratingModal.classList.contains('is-visible') && e.code === 'Escape') {\n    closeModalPopup();\n  }\n  if (ratingModal.classList.contains('is-visible') && e.code === 'Escape') {\n    ratingModal.classList.remove('is-visible');\n  }\n}\n\nfunction removeCardFromFavorite(e) {\n  const cardToDelete = e.currentTarget.dataset.heart;\n  document.body.style.overflow = 'hidden';\n  Notiflix.Confirm.show(\n    'Delete recipe',\n    'Are you sure you want to delete this recipe from favorites?',\n    'Yes',\n    'No',\n    () => {\n      uniqueLikedRecipes = uniqueLikedRecipes.filter(\n        recipe => recipe !== cardToDelete\n      );\n      if (uniqueLikedRecipes.length === 0) {\n        deleteBtnRef.classList.add('is-hidden');\n        emptyPlaceholderRef.classList.add('empty-meal-is-visible');\n      }\n      closeModalPopup();\n      localStorage.setItem('liked-recipes', JSON.stringify(uniqueLikedRecipes));\n      Notiflix.Block.standard('.body');\n      likedRecipeList.innerHTML = '';\n      for (const recipe of uniqueLikedRecipes) {\n        renderFavoriterecipes(recipe).then(({ data }) => {\n          createCards([data]);\n        });\n      }\n      Notiflix.Block.remove('.body');\n      document.body.style.overflow = 'auto';\n    },\n    () => {\n      document.body.style.overflow = 'auto';\n    }\n  );\n}\n\nfunction renderMarkup(arr) {\n  const markup = arr.map(createMarkup).join('');\n  likedRecipeList.insertAdjacentHTML('afterbegin', markup);\n}\n\nfunction createCards(arr) {\n  renderMarkup(arr);\n  const seeRecipeBtn = document.querySelector('.js-see-recipe');\n  const heartIcon = document.querySelector('.heart-svg-button');\n  heartIcon.addEventListener('click', removeCardFromFavorite);\n  const heartSvg = heartIcon.querySelectorAll('.svg');\n  heartSvg.forEach(svg => svg.classList.add('svg-is-active'));\n  seeRecipeBtn.addEventListener('click', e => {\n    openModal(seeRecipeBtn.dataset.id).then(() => {\n      const removeBtn = document.querySelector('[data-add-favorite]');\n      removeBtn.removeEventListener('click', addClickHandler);\n      removeBtn.innerHTML = 'Remove from favorites';\n      removeBtn.addEventListener('click', e => {\n        const cardToDelete = e.currentTarget.dataset.favorite;\n        Notiflix.Confirm.show(\n          'Delete recipe',\n          'Are you sure you want to delete this recipe from favorites?',\n          'Yes',\n          'No',\n          () => {\n            uniqueLikedRecipes = uniqueLikedRecipes.filter(\n              recipe => recipe !== cardToDelete\n            );\n            if (uniqueLikedRecipes.length === 0) {\n              deleteBtnRef.classList.add('is-hidden');\n              emptyPlaceholderRef.classList.add('empty-meal-is-visible');\n            }\n            closeModalPopup();\n            localStorage.setItem(\n              'liked-recipes',\n              JSON.stringify(uniqueLikedRecipes)\n            );\n            Notiflix.Block.standard('.body');\n            likedRecipeList.innerHTML = '';\n            for (const recipe of uniqueLikedRecipes) {\n              renderFavoriterecipes(recipe).then(({ data }) => {\n                createCards([data]);\n              });\n            }\n            Notiflix.Block.remove('.body');\n            document.body.style.overflow = 'auto';\n          },\n          () => {\n            document.body.style.overflow = 'auto';\n          }\n        );\n      });\n    });\n    e.currentTarget.blur();\n    backdrop.classList.add('is-visible');\n    document.body.style.overflow = 'hidden';\n    window.addEventListener('mousedown', outerClickHandler);\n    window.addEventListener('keydown', escapePressHandler);\n  });\n}\n\n// function createRecipePopup(recipe) {\n//   const modalMarkup = renderModalByRecipe(recipe);\n//   modal.innerHTML = modalMarkup;\n//   const openRatingModalBtn = document.querySelector('[data-rating-open]');\n//   openRatingModalBtn.addEventListener('click', () => {\n//     window.addEventListener('mousedown', outerClickHandler);\n//     window.addEventListener('keydown', escapePressHandler);\n//     ratingModal.classList.add('is-visible');\n//   });\n// const removeFavoriteBtnRef = document.querySelector('[data-remove-favorite]');\n// removeFavoriteBtnRef.addEventListener('click', removeCardFromFavorite);\n// }\n","import axios from 'axios';\n\nexport function renderFavoriterecipes(recipe) {\n  return axios.get(\n    `https://tasty-treats-backend.p.goit.global/api/recipes/${recipe}`\n  );\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5Aif5\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"iGlSd\\\":\\\"favorites.281bc31e.js\\\",\\\"5Aif5\\\":\\\"sprite.5b23c8c9.svg\\\",\\\"aQ52u\\\":\\\"favorites.03f38ee3.js\\\"}\"));","import './js/changeTheme';\nimport './js/mobile-menu';\nimport './js/modal';\nimport './js/activePage';\nimport './js/api/favorites-api';\nimport './js/favoritesCards';\n"],"names":["$aM96l","parcelRequire","$parcel$interopDefault","$7Y9D8","Confirm","init","zindex","deleteBtnRef","document","querySelector","likedRecipeList","emptyPlaceholderRef","ratingModalCloseBtn","ratingModal","backdrop","addEventListener","closeModalPopup","classList","remove","likedRecipesArray","JSON","parse","localStorage","getItem","uniqueLikedRecipes","length","filter","value","index","array","indexOf","recipe","renderFavoriterecipes","then","data","createCards","e","currentTarget","blur","body","style","overflow","show","setItem","stringify","add","innerHTML","window","removeEventListener","outerClickHandler","escapePressHandler","target","contains","code","removeCardFromFavorite","cardToDelete","dataset","heart","Block","standard","recipe1","arr","markup","map","$bjUAO","createMarkup","join","insertAdjacentHTML","renderMarkup","seeRecipeBtn","heartIcon","querySelectorAll","forEach","svg","e1","$c4xQB","openModal","id","removeBtn","addClickHandler","favorite","recipe2","$2shzp","$7d85726ac5cf01ef$export$38648d1c02427e6d","default","get","module","exports","URL","resolve","import","meta","url","toString","register"],"version":3,"file":"favorites.281bc31e.js.map"}