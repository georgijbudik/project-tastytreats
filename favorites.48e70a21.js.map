{"mappings":"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","sources":["src/js/favoritesCards.js","src/js/api/favorites-api.js","node_modules/@parcel/runtime-js/lib/runtime-be0040fa7dfe1448.js","node_modules/@parcel/runtime-js/lib/runtime-6f2f5d4f6f9b17ff.js","src/favorites.js"],"sourcesContent":["import { renderFavoriterecipes } from './api/favorites-api';\nimport { renderModalByRecipe } from './pop-up';\nimport { createMarkup } from './createMarkupCards';\nimport fetchRecipeById from './api/recipe-info-api';\nimport SPRITE from '../images/sprite/sprite.svg';\nimport Notiflix from 'notiflix';\n\n// localStorage.clear();\n\nconst deleteBtnRef = document.querySelector('.favorites-delete-recipes-btn');\nconst likedRecipeList = document.querySelector('.favorites-recipe-list');\nconst emptyPlaceholderRef = document.querySelector('.empty-meal');\n\nconst ratingModalCloseBtn = document.querySelector('[data-rating-close]');\nconst ratingModal = document.querySelector('[data-rating-form]');\nconst backdrop = document.querySelector('.popup-backdrop');\nconst modal = document.querySelector('.modal-recipe');\nconst closeModalBtn = document.querySelector('[data-action=\"close\"]');\n\ncloseModalBtn.addEventListener('click', () => {\n  closeModalPopup();\n});\n\nratingModalCloseBtn.addEventListener('click', () => {\n  ratingModal.classList.remove('is-visible');\n});\nconst likedRecipesArray = JSON.parse(localStorage.getItem('liked-recipes'));\nlet uniqueLikedRecipes;\n\nif (likedRecipesArray) {\n  emptyPlaceholderRef.classList.add('is-hidden');\n  deleteBtnRef.classList.remove('is-hidden');\n}\n\nif (!likedRecipesArray || likedRecipesArray.length === 0) {\n  return;\n} else {\n  uniqueLikedRecipes = likedRecipesArray.filter(\n    (value, index, array) => array.indexOf(value) === index\n  );\n\n  for (const recipe of uniqueLikedRecipes) {\n    renderFavoriterecipes(recipe).then(({ data }) => {\n      createCards([data]);\n      createRecipePopup(data);\n    });\n  }\n}\n\ndeleteBtnRef.addEventListener('click', () => {\n  localStorage.setItem('liked-recipes', JSON.stringify([]));\n  emptyPlaceholderRef.classList.remove('is-hidden');\n  deleteBtnRef.classList.add('is-hidden');\n  likedRecipeList.innerHTML = '';\n});\n\nfunction closeModalPopup() {\n  window.removeEventListener('mousedown', outerClickHandler);\n  window.removeEventListener('keydown', escapePressHandler);\n  backdrop.classList.remove('is-visible');\n  document.body.style.overflow = 'auto';\n}\n\nfunction outerClickHandler(e) {\n  if (e.target === backdrop) {\n    closeModalPopup();\n  }\n  if (e.target === ratingModal) {\n    ratingModal.classList.remove('is-visible');\n  }\n}\n\nfunction escapePressHandler(e) {\n  if (!ratingModal.classList.contains('is-visible') && e.code === 'Escape') {\n    closeModalPopup();\n  }\n  if (ratingModal.classList.contains('is-visible') && e.code === 'Escape') {\n    ratingModal.classList.remove('is-visible');\n  }\n}\n\nfunction removeCardFromFavorite(e) {\n  uniqueLikedRecipes = uniqueLikedRecipes.filter(\n    recipe => recipe !== e.currentTarget.dataset.heart\n  );\n  closeModalPopup();\n  localStorage.setItem('liked-recipes', JSON.stringify(uniqueLikedRecipes));\n  Notiflix.Block.standard('.body');\n  likedRecipeList.innerHTML = '';\n  for (const recipe of uniqueLikedRecipes) {\n    renderFavoriterecipes(recipe).then(({ data }) => {\n      createCards([data]);\n      createRecipePopup(data);\n    });\n  }\n  Notiflix.Block.remove('.body');\n}\n\nfunction renderMarkup(arr) {\n  const markup = arr.map(createMarkup).join('');\n  likedRecipeList.insertAdjacentHTML('afterbegin', markup);\n}\n\nfunction createCards(arr) {\n  renderMarkup(arr);\n  const seeRecipeBtn = document.querySelector('.js-see-recipe');\n  const heartIcon = document.querySelector('.heart-svg-button');\n  heartIcon.addEventListener('click', removeCardFromFavorite);\n  seeRecipeBtn.addEventListener('click', e => {\n    e.currentTarget.blur();\n    backdrop.classList.add('is-visible');\n    document.body.style.overflow = 'hidden';\n    window.addEventListener('mousedown', outerClickHandler);\n    window.addEventListener('keydown', escapePressHandler);\n  });\n}\n\nfunction createRecipePopup(recipe) {\n  const modalMarkup = renderModalByRecipe(recipe);\n  modal.innerHTML = modalMarkup;\n  const openRatingModalBtn = document.querySelector('[data-rating-open]');\n  openRatingModalBtn.addEventListener('click', () => {\n    window.addEventListener('mousedown', outerClickHandler);\n    window.addEventListener('keydown', escapePressHandler);\n    ratingModal.classList.add('is-visible');\n  });\n  // const removeFavoriteBtnRef = document.querySelector('[data-remove-favorite]');\n  // removeFavoriteBtnRef.addEventListener('click', removeCardFromFavorite);\n}\n","import axios from 'axios';\n\nexport function renderFavoriterecipes(recipe) {\n  return axios.get(\n    `https://tasty-treats-backend.p.goit.global/api/recipes/${recipe}`\n  );\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('bN78u') + require('./helpers/bundle-manifest').resolve(\"iZSSn\");","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bN78u\\\":\\\"favorites.48e70a21.js\\\",\\\"iZSSn\\\":\\\"sprite.5b23c8c9.svg\\\",\\\"fY9Hl\\\":\\\"favorites.c084e0c5.js\\\"}\"));","import './js/changeTheme';\nimport './js/mobile-menu';\nimport './js/modal';\nimport './js/activePage';\nimport './js/api/favorites-api';\nimport './js/favoritesCards';\n"],"names":["$edvpZ","parcelRequire","deleteBtnRef","document","querySelector","likedRecipeList","emptyPlaceholderRef","ratingModalCloseBtn","ratingModal","backdrop","modal","addEventListener","closeModalPopup","classList","remove","uniqueLikedRecipes","likedRecipesArray","JSON","parse","localStorage","getItem","add","length","filter","value","index","array","indexOf","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","recipe","renderFavoriterecipes","then","param","data","createCards","createRecipePopup","err","return","setItem","stringify","innerHTML","window","removeEventListener","outerClickHandler","escapePressHandler","body","style","overflow","e","target","contains","code","removeCardFromFavorite","currentTarget","dataset","heart","$parcel$interopDefault","$6JpON","Block","standard","recipe1","arr","markup","map","$fxGMx","createMarkup","join","insertAdjacentHTML","renderMarkup","seeRecipeBtn","blur","modalMarkup","$iNcuh","renderModalByRecipe","$dIxxU","$a59aa69bfe2ffc12$export$38648d1c02427e6d","default","get","concat","module","exports","getBundleURL","resolve","register"],"version":3,"file":"favorites.48e70a21.js.map"}